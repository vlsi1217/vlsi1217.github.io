<!DOCTYPE HTML>
<html>
<head>
  <meta name="google-site-verification" content="en_dejusB3O2_8PtG6GlYdYmaTEHr2fTEiIoZidOypY" />
  <meta name="baidu-site-verification" content="7tszoAHV0d" />
  <meta charset="utf-8">
  
  <title>百变千幻衡山云雾十三式</title>
  <meta name="author" content="玉娇龙">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="百变千幻衡山云雾十三式"/>

  
    <meta property="og:image" content="undefined"/>
  

  
    <link rel="alternative" href="/atom.xml" title="百变千幻衡山云雾十三式" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-62877030-1', 'auto');
  ga('send', 'pageview');
</script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?null";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


</head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">百变千幻衡山云雾十三式</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/atom.xml" title="Rss feed">
			  <i class="fa fa-rss-square"></i>Rss
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 <div class="page-header">
  <h1>Wikirize my knowledge</h1>
</div>

<div class="row page">

	
	<div class="col-md-9">
	

		<div class="slogan">
      <i class="fa fa-heart"></i>
      Yet another bootstrap theme.
</div>    

		<div class="mypage">
		
		<!-- title and entry -->
		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-30 </div>
			<div class="article-title"><a href="/2015/05/30/Leetcode/Report/Report-LargestRectangleInstagram/" title="做完九章Ladder">Largest rectangle in instagram 解题报告</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <h1 id="题目">题目</h1><ul>
<li><a href="http://www.lintcode.com/en/problem/largest-rectangle-in-histogram/" target="_blank" rel="external">题目链接</a></li>
</ul>
<h1 id="思考">思考</h1><h2 id="方法1:_O(n^2)的遍历做法-">方法1: O(n^2)的遍历做法.</h2><ul>
<li>很简单, 一个个rectangle area计算出来, 然后枚举/排序/找最大.</li>
<li>这里outer loop来抓每一个area的height, 然后分别从它向左/右找第一个比他小的数. 然后计算面积. 在计算的过程中update ans.</li>
<li>这里向左向右的while loop找lhs/rhs可以追述到Algs4的Binary search, Quick Sort的partition. 或者是Maximum subarray的Divide &amp; Conquer的做法.</li>
<li>这里很重要的一点: 还是: 数列问题的index. 这里的终止条件是i = -1 || i = length. 这样的话, 可以统一起来lhs总是比他小的那个位置, rhs总是比他大的那个位置. 从而width = rhs-lhs-1.</li>
</ul>
<h2 id="方法2:_Stack的使用:_O(1)找左右第一个比他小的数">方法2: Stack的使用: O(1)找左右第一个比他小的数</h2><ul>
<li>Stack又一个用法: 一个<strong>严格</strong>单调递增的stack. 它的左边第一个就是就是比它小的第一个数.</li>
<li><p>九章课上说, 可以有2个方法:</p>
<ol>
<li>正着跑一边incStk, 找到他的左边第一个比他小的位置, 然后reverse array, 再跑一遍stack, 找到右边第一个比他小的位置. (这和方法1有什么区别? 有的, 这个是O(n)找到所有点的左右范围.)</li>
<li>也可以是九章答案的做法, 就是for里面一个while, 来维持单调递增性, 若违反了, 则说明找到了右边界, 因为其左侧第一个就是第一个比他小的数的位置.</li>
</ol>
</li>
<li><p>但是: 虽然意思懂了, 但是一做发现很多错误! 我第一次在Lintcode上面写就出现了一个很好的错误: 如果[1,1]的话怎么弄? 应该输出2, 但我得到1! 这是因为我的width计算不对.</p>
<ul>
<li>有个很重要的点: 例如[1], 然后cur = 0. 那么右边界找到了, 接着pop, 于是incStk = []. 那么左边界是多少呢? 我当时直接i-l-1. 其中l是incStk.peek(). 其实这样不对. 也导致了我的area是1. 因为stack为空, 说明height[pop()]的左边界是通到i = 0! 即width = i.</li>
<li>上面的这个错误的原因还有一个! 就是我在while loop判断的时候用的是”&lt;”, 也就是维护的是一个<code>单调不递减</code>stack, 而不是<code>单调递增</code>stack. 这样的后果是, incStk出现了[1,1], 然后cur = 0. 接着pop位于第二个的1. 算出来的不知道是有什么物理意义. 所以正确的做法是while loop的判断用的是<code>&lt;=</code>. 从而保证单调递增, 即左边就是比它小的数.</li>
</ul>
</li>
</ul>
<h2 id="方法3:_Dynamic_programming:_凡是找极值都应该想想动态规划-">方法3: Dynamic programming: 凡是找极值都应该想想动态规划.</h2>
	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/30/Leetcode/Report/Report-LargestRectangleInstagram/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-26 </div>
			<div class="article-title"><a href="/2015/05/26/MOOC/Algorithm_JapanBook/Algs-Japan-toc/" title="Path of learning the book: 挑战程序设计竞赛">Algs-Japan-toc</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <h1 id="Elementary">Elementary</h1><h2 id="1-_exhaustive_search">1. exhaustive search</h2><h2 id="2-_Greedy">2. Greedy</h2><h2 id="3-_DP_I">3. DP I</h2><h2 id="4-_Data_Structure">4. Data Structure</h2><h2 id="5-_Graph">5. Graph</h2><h2 id="6-_Math_trick">6. Math trick</h2><h2 id="*-_Problems">*. Problems</h2><h1 id="Intermediate">Intermediate</h1><h2 id="1-_Binary_Search">1. Binary Search</h2><h2 id="2-_Tricks_I">2. Tricks I</h2><h2 id="3-_Data_Structure">3. Data Structure</h2><h2 id="4-_DP_II">4. DP II</h2><h2 id="5-_Max_flow/Min_cut">5. Max flow/Min cut</h2><h2 id="6-_jihe">6. jihe</h2><h2 id="*-_Problems-1">*. Problems</h2><h1 id="High">High</h1><h2 id="1-_Math_Problems">1. Math Problems</h2><h2 id="2-_Game_Strategies">2. Game Strategies</h2><h2 id="3-_Graph_Theory">3. Graph Theory</h2><h2 id="4-_Tricks_II">4. Tricks II</h2><h2 id="5-_Clever_search">5. Clever search</h2><h2 id="6-_Divide_and_Conquer">6. Divide and Conquer</h2><h2 id="7-_Elegant_String_Algs">7. Elegant String Algs</h2><h2 id="*-_problems">*. problems</h2>
	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/26/MOOC/Algorithm_JapanBook/Algs-Japan-toc/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-25 </div>
			<div class="article-title"><a href="/2015/05/25/Leetcode/Report/Report-Word-Break/" title="O() != TLE. 同样的O(), 但是实际时间还是会导致TLE">Report: Word Break</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <h1 id="题目">题目</h1><ul>
<li><a href="http://www.lintcode.com/en/problem/word-break/" target="_blank" rel="external">题目链接</a></li>
</ul>
<h1 id="思考">思考</h1><h2 id="first_trial:_fail">first trial: fail</h2><ul>
<li>这里我还是对DP的状态没搞清楚. 做DP之前, 乃至所有coding之前要想好再动手!</li>
<li>对Substring不熟. 对string不熟. <code>s.substring(a,b+1)</code>表示的是string[a…b]. 所以<code>s.substring(0, s.length()+1)</code>才是返回整个string的.</li>
<li>String的DP表的边界往往是DP[s.length()+1]. 因为<code>DP[0] = true</code>: 表示: 选择string的0个元素也是符合条件的. 然后结果就是返回DP[s.length()]表示选择s的所有元素.</li>
<li>这里的optimally equation搞了很久. 其实公式是知道的, 但是一直不对. 其实就是: DP[i] = DP[j], j &lt; i &amp;&amp; s.substring(j,i+1)在dict内.</li>
<li>代码如下: 第一次写的时候, i,k这样写的话感觉不是很通用. 是在for loop statement的地方写好range, 还是在loop里面+1?  这里因为我的i的范围是1~s.length()<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> wordBreak1st(<span class="keyword">String</span> s, Set&lt;<span class="keyword">String</span>&gt; dict) &#123;</span><br><span class="line">    <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">boolean</span>[] F = <span class="keyword">new</span> <span class="built_in">boolean</span>[s.length() + <span class="number">1</span>];</span><br><span class="line">    F[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">1</span>; i &lt; s.length(); ++i) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="built_in">int</span> k = <span class="number">0</span>; k &lt; i; ++k) &#123;</span><br><span class="line">        <span class="keyword">if</span> (k == <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (F[k] == <span class="keyword">true</span> &amp;&amp; dict.contains(s.substring(k, i + <span class="number">1</span>))) &#123;</span><br><span class="line">            <span class="comment">// System.out.println(s.substring(k, i + 1) + "," + k + "+" + i);</span></span><br><span class="line">            F[i] = <span class="keyword">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (F[k] == <span class="keyword">true</span> &amp;&amp; dict.contains(s.substring(k + <span class="number">1</span>, i + <span class="number">1</span>))) &#123;</span><br><span class="line">          F[i] = <span class="keyword">true</span>;</span><br><span class="line">          <span class="comment">// System.out.println(s.substring(k + 1, i + 1) + "," + k + "+" + i);</span></span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// for (boolean b : F)</span></span><br><span class="line">    <span class="comment">// System.out.print(b + " ");</span></span><br><span class="line">    <span class="keyword">return</span> F[s.length() - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="2nd_trial:_TLE">2nd trial: TLE</h2><ul>
<li>模仿Code Ganker的写法, 特别是边界的定义. 因为如果是像第一次那样定义的话, k还要分2种情况. 代码很麻烦, 特别是对于index处理越多越容易乱或者出错</li>
<li>注意这里的i的范围是一般向的0…s.length()-1. 而j的范围是0…i. 注意这个i是包括的. 因为s.substring(k, i+1). 所以k最大应该取到i, 这样substring就是s[i].</li>
<li>这时候的时间复杂度是O(n^2). 不过如同<a href="http://stackoverflow.com/a/4679775/3984911" target="_blank" rel="external">SOF link</a>: substring()是O(n)操作. 所以其实是: O(n^3)的时间复杂度.</li>
<li>就算这样, 还是TLE!</li>
<li>代码如下:<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> wordBreak2nd(<span class="keyword">String</span> s, Set&lt;<span class="keyword">String</span>&gt; dict) &#123;</span><br><span class="line">   <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">boolean</span>[] F = <span class="keyword">new</span> <span class="built_in">boolean</span>[s.length() + <span class="number">1</span>]; <span class="comment">// string DP always leave 0th as no select always</span></span><br><span class="line">                                              <span class="comment">// true, so the DP space is len+1.</span></span><br><span class="line">   F[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; s.length(); ++i) &#123; <span class="comment">// notice the init and end of i for states</span></span><br><span class="line">     <span class="keyword">for</span> (<span class="built_in">int</span> k = <span class="number">0</span>; k &lt;= i; ++k) &#123;</span><br><span class="line">       <span class="keyword">if</span> (F[k] == <span class="keyword">true</span> &amp;&amp; dict.contains(s.substring(k, i+<span class="number">1</span>))) &#123;</span><br><span class="line">         F[i+<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> F[s.length()];</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4th_trial:_AC">4th trial: AC</h2><ul>
<li>看了九章的参考答案. 发现这时候没有的变成O(n). 那只有prune了. 注意到, F[k]==true的时候, 其实并不用判断所有substring(k, i+1). 因为如果这个substring长于dict内单词的长度就可以不用考虑了. 而且通常来说: word的长度最多25左右. 即i-k+1&lt;=maxlen, 即<code>k&gt;=i-1-maxlen</code>.(注意这里的是i, 不是i+1) 所以可以缩小一点k的取值范围.</li>
<li>代码如下:<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">boolean</span> wordBreak2nd(<span class="keyword">String</span> s, Set&lt;<span class="keyword">String</span>&gt; dict) &#123;</span><br><span class="line">   <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() == <span class="number">0</span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">boolean</span>[] F = <span class="keyword">new</span> <span class="built_in">boolean</span>[s.length() + <span class="number">1</span>]; <span class="comment">// string DP always leave 0th as no select always</span></span><br><span class="line">                                              <span class="comment">// true, so the DP space is len+1.</span></span><br><span class="line">   F[<span class="number">0</span>] = <span class="keyword">true</span>;</span><br><span class="line">   <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; s.length(); ++i) &#123; <span class="comment">// notice the init and end of i for states</span></span><br><span class="line">     <span class="keyword">for</span> (<span class="built_in">int</span> k = <span class="number">0</span>; k &lt;= i; ++k) &#123;</span><br><span class="line">       <span class="keyword">if</span> (F[k] == <span class="keyword">true</span> &amp;&amp; dict.contains(s.substring(k, i+<span class="number">1</span>))) &#123;</span><br><span class="line">         <span class="comment">// System.out.println(s.substring(k, i) + "," + k + "+" + i);</span></span><br><span class="line">         F[i+<span class="number">1</span>] = <span class="keyword">true</span>;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">// for (boolean b : F)</span></span><br><span class="line">   <span class="comment">// System.out.print(b + " ");</span></span><br><span class="line">   <span class="keyword">return</span> F[s.length()];</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="总结">总结</h1><ol>
<li>DP问题一定要想清楚state和optimally equation在写代码.</li>
<li>loop的范围, 以及得到state的方式一定要设计好. 例如这里的是F[i+1]还是F[i]就很大差别. 因为这里要表示的是: 取string前i个元素是成立的. 所以substring(k, i+1), 然后F[i+1]. 这样就是i个元素的state成立, 于是接下来就可以F[k] &amp;&amp; substring. 因为这样substring的下确界k正好是kth元素. eg: F[4] &amp;&amp; substring(4,7).<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">l i n t c o d e</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span></span><br><span class="line"></span><br><span class="line"><span class="type">F</span>[<span class="number">4</span>] = <span class="literal">true</span>, <span class="built_in">substring</span>(<span class="number">4</span>, <span class="number">7</span>+<span class="number">1</span>) =&gt; <span class="type">F</span>[<span class="number">7</span>+<span class="number">1</span>] = <span class="literal">true</span>. 对于lintcode的例子.</span><br><span class="line"><span class="type">F</span>[<span class="number">7</span>] = <span class="literal">true</span>, <span class="built_in">substring</span>(<span class="number">7</span>, <span class="number">7</span>+<span class="number">1</span>) =&gt; <span class="type">F</span>[<span class="number">7</span>+<span class="number">1</span>] = <span class="literal">true</span>.  对于<span class="type">ProgramCreek</span>的例子.</span><br></pre></td></tr></table></figure>
</li>
</ol>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/25/Leetcode/Report/Report-Word-Break/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-24 </div>
			<div class="article-title"><a href="/2015/05/24/Leetcode/Report/Report-Triangle/" title="九章算法的学习DP的经典例子">Report: Triangle Min Path Sum</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <h1 id="题目">题目</h1><h1 id="思路">思路</h1><h1 id="问题">问题</h1><h2 id="first_trial_:_TLE">first trial : TLE</h2><ul>
<li><p>如果使用简单的recursion会出现TLE, 代码如下:</p>
  <figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Solution &#123;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * @param triangle: a list of lists of integers.</span><br><span class="line">     * @return: An integer, minimum path sum.</span><br><span class="line">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> minimumTotal(ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="built_in">triangle</span>) &#123;</span><br><span class="line">        <span class="comment">// write your code here</span></span><br><span class="line">        <span class="built_in">int</span>[] <span class="built_in">min</span> = <span class="keyword">new</span> <span class="built_in">int</span>[]&#123;Integer.MAX_VALUE&#125;;</span><br><span class="line">        dfs(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="built_in">min</span>, <span class="built_in">triangle</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">min</span>[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> dfs(<span class="built_in">int</span> x, <span class="built_in">int</span> y, <span class="built_in">int</span> sum, <span class="built_in">int</span>[] <span class="built_in">min</span>, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="built_in">triangle</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (x == <span class="built_in">triangle</span>.<span class="built_in">size</span>()) &#123;</span><br><span class="line">            <span class="built_in">min</span>[<span class="number">0</span>] = Math.<span class="built_in">min</span>(<span class="built_in">min</span>[<span class="number">0</span>], sum);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(x+<span class="number">1</span>, y, sum+<span class="built_in">triangle</span>.<span class="built_in">get</span>(x).<span class="built_in">get</span>(y), <span class="built_in">min</span>, <span class="built_in">triangle</span>);</span><br><span class="line">        dfs(x+<span class="number">1</span>, y+<span class="number">1</span>, sum+<span class="built_in">triangle</span>.<span class="built_in">get</span>(x).<span class="built_in">get</span>(y), <span class="built_in">min</span>, <span class="built_in">triangle</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Lintcode里面TLE的页面如下: <img src="http://7xj2zx.com1.z0.glb.clouddn.com/Lintcode_TLE_Triangle.JPG" alt="TLE_lintcode"></li>
<li>有几个要注意的地方:<ol>
<li>因为Lintcode是给了class, 要求写method. 虽然可以有helper method, 例如这里的dfs. 但是因为triangle不是field, 只是一个param, 所以必须要传给helper当param. 不然用不了.</li>
<li>Lintcode 的 test case是看不到全部的… 所以也不能copy放到eclipse里面算了. 但是有个基本常识就是一般不能有超过20层的recursion. 所以尽量不用recursion才行.</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="2nd_trial:_pass">2nd trial: pass</h2><ul>
<li>看到这种Divide and Conquer的问题自然想到使用DP解决. 这样可以使用重复计算的部分, 而且避免递归. 注意到: 这是一个找min的值的问题. 自然是DP</li>
</ul>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/24/Leetcode/Report/Report-Triangle/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-24 </div>
			<div class="article-title"><a href="/2015/05/24/Leetcode/Report/Report-Jump-Game-I/" title="经典的DP, Greedy问题">Report: Jump Game I</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <blockquote>
<ul>
<li>学习了经典的DP<ul>
<li>还有<code>local, global最优解DP</code></li>
<li>以及变动边界的loop</li>
</ul>
</li>
</ul>
</blockquote>
<h1 id="题目">题目</h1><ul>
<li>题目链接](<a href="http://www.lintcode.com/en/problem/jump-game/" target="_blank" rel="external">http://www.lintcode.com/en/problem/jump-game/</a>)</li>
<li>好的test case: <code>{0,8,2,0,9}</code>,<code>{5, 8, 3, 0, 6, 7, 9, 6, 3, 4, 5, 2, 0, 6, 2, 6, 7, 10, 8, 0}</code></li>
</ul>
<h1 id="思考">思考</h1><h2 id="first_trial:_fail">first trial: fail</h2><ul>
<li>状态: boolean F[i] 表示能否从起点到达position i.</li>
<li>一开始我的optimally equation想错了: 我想的是: F[i] = F[k] &amp;&amp; A[k]&gt;= abs(k-i). 这里的k是0…A.length. 在一开始的test case可以过, 但是<code>{5, 8, 3, 0, 6, 7, 9, 6, 3, 4, 5, 2, 0, 6, 2, 6, 7, 10, 8, 0}</code>就错了. 应该是true, 但我返回false.<ul>
<li>这里有2个错误, 一开始我想的是会不会有先跳到远的, 然后跳回来近的, 再跳到终点. 实际上是不会的, 因为这里的A[i]表示的是从position i, 能跳的<strong>最远距离</strong>, 而不是能跳的距离(像<strong>大富翁</strong>). 所以k不应该loop全部node, 而是小于i的所有node.</li>
<li>更严重的错误是: F[i]表示的是<strong>是否</strong>能从起点到达. 所以只要能到达, 就OK了. 也就是说: 只要true, 就停止loop. 这也是导致我的这个code fail的原因.</li>
</ul>
</li>
</ul>
<h2 id="second_trial:_OK">second trial: OK</h2><ul>
<li>这一次, 我还是DP, 不过改好了optimally equation, 即只要发现F[i]==true就break loop.</li>
<li>但是这时候的时间是O(n**2). 因为要loop每一个node, 每一个node的内循环最坏情况是loop完所有小于i的k. 所以<code>n+n-1+n-2+...+1 = O(n^2)</code>. 而且空间是O(n).</li>
</ul>
<h2 id="third_trial:_Failed">third trial: Failed</h2><ul>
<li>这里还是使用Greedy最好, 因为只要最远距离超过position就行了, 那就看每一步能跳到的最远距离就行了. 实现的时候是使用经典的: <strong>local/global optimal</strong>. 再次复习一下这种使用2个DP表来解决问题的DP方法. 即local DP记录: 以目前node出发能得到的最优解. Global则是记录历史到目前node位置能得到的最优解.</li>
<li>还要复习一下Greedy, 我之前的理解不对:<ul>
<li>错误: 之前想的是, Greedy不就是从位置1跳最远距离, 例如跳到位置5, 然后再从位置5跳最远距离. 觉得这种Greedy太Greedy了. 很有可能, 位置5的A[5]=0. 那就没得跳了.</li>
<li>实际上, Greedy是针对每一个node都考虑一遍Greedy. 即: 1-5, 2-4-7, 3-9-dest.</li>
</ul>
</li>
<li>实现上面, Ganker只用了O(1)的空间. 我则是使用通用的DP表, 记录每一个node的state.</li>
<li>代码<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">boolean</span> <span class="title">jumpLocalGlobalDP</span><span class="params">(<span class="keyword">int</span>[] A)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (A == <span class="keyword">null</span> || A.length == <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">int</span>[] local = <span class="keyword">new</span> <span class="keyword">int</span>[A.length];</span><br><span class="line">    <span class="keyword">int</span>[] global = <span class="keyword">new</span> <span class="keyword">int</span>[A.length];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// init base condition</span></span><br><span class="line">    local[<span class="number">0</span>] = A[<span class="number">0</span>];</span><br><span class="line">    global[<span class="number">0</span>] = A[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// build the local/global DP table</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; A.length; ++i) &#123;</span><br><span class="line">      local[i] = A[i] + i;</span><br><span class="line">      global[i] = Math.max(global[i-<span class="number">1</span>], local[i]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ans</span></span><br><span class="line">    <span class="keyword">if</span> (global[A.length-<span class="number">1</span>] &gt;= A.length - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Forth_trial:_AC">Forth trial: AC</h2><ul>
<li>刚才的做法是错误的, 例如{0,8,2,0,9}.</li>
<li>仔细研究一下Ganker的写法, 他并不是简单的loop, 而是会改变boundary的loop. 这个很有意思. 在使用一个queue实现的BFS模版里面, 有个很重要的点就是queue.size()不能作为boundary, 要int size = queue.size(). 因为queue会在loop里面改变大小. 而这里之所以要使用变动的boundary是因为, 如果当前node只考虑能打到的情况. 例如这个例子里面, node 1是达不到的.</li>
<li>所以很重要的一点是loop的范围应该是:<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for <span class="comment">(int i = 1; i &lt;= global[i-1] &amp;&amp; i &lt; A.length; ++i)</span></span><br></pre></td></tr></table></figure>
</li>
</ul>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/24/Leetcode/Report/Report-Jump-Game-I/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-23 </div>
			<div class="article-title"><a href="/2015/05/23/Leetcode/9chap/Unit7-9chap-Graph/" title="田老师第二课: 学习总结Graph相关的面试题目">Unit7-9chap-Graph</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  
	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/23/Leetcode/9chap/Unit7-9chap-Graph/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-23 </div>
			<div class="article-title"><a href="/2015/05/23/Leetcode/9chap/Unit6-9chap-List/" title="田老师的第一课: list题目总结">Unit6-9chap-List</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  
	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/23/Leetcode/9chap/Unit6-9chap-List/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-22 </div>
			<div class="article-title"><a href="/2015/05/22/Leetcode/9chap/Unit5-9chap-DP2/" title="段誉最后一课: 总结DP问题的后2个常见题型">Unit 5 NineChap : Dynamic programming - part I</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <blockquote>
<ul>
<li>今天继续讲Dynamic Programming.<ul>
<li>后2个常见的DP类型题: Two Sequence DP和Backpack.</li>
</ul>
</li>
</ul>
</blockquote>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/22/Leetcode/9chap/Unit5-9chap-DP2/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-22 </div>
			<div class="article-title"><a href="/2015/05/22/OS/CircularQueue/" title="整理一下Scott的Circular Queue的设计">CircularQueue</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <h2 id="Circular_Queue的作用">Circular Queue的作用</h2><ul>
<li>在SRAM里面相当于是无限大的buffer. 实现基本都是下图所示:<br><img src="http://7xj2zx.com1.z0.glb.clouddn.com/cmycode_CB.PNG" alt="ringBuffer">. 其中enqueue在Head, dequeue在tail. 且Head指向下一个插入的位置, Tail指向下一个可以读取的位置. 这样每次进来, 只要判断是否wrap, full. 然后就可以读写了.</li>
<li>在一般来说是作为asynch thread communication. 见<a href="http://www.cs.hmc.edu/~geoff/classes/hmc.cs105.201501/labs/lab05-ringbuf/ringbuf.pdf" target="_blank" rel="external">CS105: Harvey Mudd</a></li>
<li>实现方式: <a href="https://github.com/angrave/SystemProgramming/wiki/Synchronization,-Part-8:-Ring-Buffer-Example" target="_blank" rel="external">github-Synchronization-CircularQueue</a>.</li>
</ul>
<h2 id="Circular_Queue的区别">Circular Queue的区别</h2><ul>
<li><p>wiki已经写了circular queue的几种实现方式, 区别在于判断empty/full的方式:</p>
<ol>
<li><p>head/tail+1 empty slot</p>
<ul>
<li>这个实现在: Ring Buffer_Anders Kaloer</li>
<li>Scott的Firmware里面的也是这样做的.</li>
</ul>
</li>
<li><p>head/tail+count</p>
<ul>
<li>一般都是用这个写, 因为简单, 而且semaphore其实就使这个count. 表示的是: 当前queue里面保存的item数量.</li>
<li>我参考的Harshkn的写法. 改了一点. 主要是count在满了之后就不动了. 然后在push/pop里面加入了判断error的代码, 来自于kqchen.</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="实现代码">实现代码</h2><h3 id="1-_使用Count">1. 使用Count</h3><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;string.h&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * https://gist.github.com/harshkn/909546</span><br><span class="line"> * C Implementation of simple circular buffer, Functionality provided are add to queue, read latest</span><br><span class="line"> *</span><br><span class="line"> * Implementation: head, tail, and count. The major different between AndersKaloer/Harshkn is the way to detect full/empty.</span><br><span class="line"> * The former trade with an empty slot, the latter use additional int-&gt;count. I review this because this is easier and Scott uses it too.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line">typedef <span class="keyword">struct</span> circular_buffer &#123;</span><br><span class="line">	void *buffer;     <span class="comment">// data buffer</span></span><br><span class="line">	void *buffer_end; <span class="comment">// end of data buffer</span></span><br><span class="line">	size_t capacity;  <span class="comment">// maximum number of items in the buffer</span></span><br><span class="line">	size_t count;     <span class="comment">// number of items in the buffer</span></span><br><span class="line">	size_t sz;        <span class="comment">// size of each item in the buffer</span></span><br><span class="line">	void *head;       <span class="comment">// pointer to head</span></span><br><span class="line">	void *tail;       <span class="comment">// pointer to tail</span></span><br><span class="line">&#125; circular_buffer;</span><br><span class="line"></span><br><span class="line">void cb_init(circular_buffer *cb, size_t capacity, size_t sz) &#123;</span><br><span class="line">	cb-&gt;buffer = malloc(capacity * sz);</span><br><span class="line">	<span class="keyword">if</span> (cb-&gt;buffer == NULL) &#123;</span><br><span class="line">		<span class="comment">// handle error</span></span><br><span class="line">	&#125;</span><br><span class="line">	cb-&gt;buffer_end = (<span class="keyword">char</span> *) cb-&gt;buffer + capacity * sz;</span><br><span class="line">	cb-&gt;capacity = capacity;</span><br><span class="line">	cb-&gt;count = <span class="number">0</span>;</span><br><span class="line">	cb-&gt;sz = sz;</span><br><span class="line">	cb-&gt;head = cb-&gt;buffer;</span><br><span class="line">	cb-&gt;tail = cb-&gt;buffer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void cb_free(circular_buffer *cb) &#123;</span><br><span class="line">	free(cb-&gt;buffer);</span><br><span class="line">	<span class="comment">// clear out other fields too, just to be safe</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void cb_push_back(circular_buffer *cb, <span class="keyword">const</span> void *item) &#123;</span><br><span class="line">	<span class="keyword">if</span> (cb-&gt;count == cb-&gt;capacity) &#123;</span><br><span class="line">		printf(<span class="string">"%s, %d: cb push back error. \n"</span>, __FILE__, __LINE__);</span><br><span class="line"><span class="comment">//		return;</span></span><br><span class="line">	&#125;</span><br><span class="line">	memcpy(cb-&gt;head, item, cb-&gt;sz);</span><br><span class="line">	printf(<span class="string">"push data = %d\n"</span>, *(<span class="keyword">char</span> *) cb-&gt;head);</span><br><span class="line">	cb-&gt;head = (<span class="keyword">char</span>*) cb-&gt;head + cb-&gt;sz;</span><br><span class="line">	<span class="keyword">if</span> (cb-&gt;head == cb-&gt;buffer_end)</span><br><span class="line">		cb-&gt;head = cb-&gt;buffer;</span><br><span class="line">	cb-&gt;count = cb-&gt;count == cb-&gt;capacity ? cb-&gt;count : cb-&gt;count + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void cb_pop_front(circular_buffer *cb, void *item) &#123;</span><br><span class="line">	<span class="keyword">if</span> (cb-&gt;count == <span class="number">0</span>) &#123;</span><br><span class="line">		printf(<span class="string">"%s, %d: cb_pop_front: empty cb.\n"</span>, __FILE__, __LINE__);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	memcpy(item, cb-&gt;tail, cb-&gt;sz);</span><br><span class="line">	printf(<span class="string">"pop data = %d\n"</span>, *(<span class="keyword">char</span> *) cb-&gt;tail);</span><br><span class="line">	cb-&gt;tail = (<span class="keyword">char</span>*) cb-&gt;tail + cb-&gt;sz;</span><br><span class="line">	<span class="keyword">if</span> (cb-&gt;tail == cb-&gt;buffer_end)</span><br><span class="line">		cb-&gt;tail = cb-&gt;buffer;</span><br><span class="line">	cb-&gt;count--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> cb_empty(circular_buffer *cb) &#123;</span><br><span class="line">	<span class="keyword">if</span> (cb-&gt;count == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> cb_full(circular_buffer *cb) &#123;</span><br><span class="line">	<span class="keyword">return</span> cb-&gt;count == cb-&gt;capacity;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">void printbuf(circular_buffer *cb) &#123;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (; i &lt; cb-&gt;capacity; ++i)</span><br><span class="line">		printf(<span class="string">"%d "</span>, *(<span class="keyword">char</span> *) (cb-&gt;buffer + i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * https://github.com/kqchen/workspace/blob/21ab1c18dbf6c674437b0c89bb313ddbfc2de85c/hello/circular.c</span><br><span class="line"> */</span></span><br><span class="line">void cb_print(circular_buffer *cb) &#123;</span><br><span class="line">	<span class="keyword">int</span> cnt = cb-&gt;count;</span><br><span class="line">	<span class="keyword">do</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (cb-&gt;count == <span class="number">0</span>) &#123;</span><br><span class="line">			printf(<span class="string">"%s, %d: cb is empty now.\n"</span>, __FILE__, __LINE__);</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		printf(<span class="string">"cb-&gt;tail=0x%x, cb-&gt;head=0x%x, cnt = %d\n"</span>, cb-&gt;tail, cb-&gt;head,</span><br><span class="line">				cnt);</span><br><span class="line">		cnt--;</span><br><span class="line">	&#125; <span class="keyword">while</span> (cnt &gt; <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * testing the ring buffer</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">int</span> main() &#123;</span><br><span class="line">	circular_buffer tony; <span class="comment">// a holder</span></span><br><span class="line">	cb_init(&amp;tony, <span class="number">4</span>, <span class="number">1</span>);</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">for</span> (; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">		cb_push_back(&amp;tony, &amp;i);</span><br><span class="line"><span class="comment">//		printf("%d with count: %d, data = %d\n", cb_full(&amp;tony), tony.count, i);</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	printf(<span class="string">"\nafter filling ---\n"</span>);</span><br><span class="line">	cb_print(&amp;tony);</span><br><span class="line"><span class="comment">//	printf("after filling ---\n");</span></span><br><span class="line"><span class="comment">//	printbuf(&amp;tony);</span></span><br><span class="line">	<span class="keyword">char</span> result;</span><br><span class="line">	<span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (; j &lt; <span class="number">6</span>; ++j) &#123;</span><br><span class="line">		cb_pop_front(&amp;tony, &amp;result);</span><br><span class="line"><span class="comment">//		printf("%d with count: %d, result = %d\n", cb_empty(&amp;tony), tony.count, result);</span></span><br><span class="line">	&#125;</span><br><span class="line">	printf(<span class="string">"\nafter pop ---\n"</span>);</span><br><span class="line">	cb_print(&amp;tony);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/22/OS/CircularQueue/#more" class="btn btn-default more">Read More</a>
</div>

		
			
	
	<!-- display as entry -->	
		<h3 class="title">
			<div class="date"> 2015-05-20 </div>
			<div class="article-title"><a href="/2015/05/20/Leetcode/Report/Report-Distinct Subsequences/" title="A collection of Hello World applications from helloworld.org.">Interleaving String 解题报告</a></div>						
		</h3>
	


			<div class="entry">
  <div class="row">
  
	<div class="col-md-12">
	  
	
	  <h1 id="Report:_Interleaving_String">Report: Interleaving String</h1><p>标签（空格分隔）： Lintcode DP Ladder</p>
<hr>
<h1 id="题目">题目</h1><ul>
<li><a href="http://www.lintcode.com/en/problem/interleaving-string/" target="_blank" rel="external">题目链接</a></li>
</ul>
<h1 id="思考">思考</h1><h2 id="first_trial:_fail">first trial: fail</h2><ul>
<li>F[i][j]表示是否可以用S1, S2的前i,j个字符表示S3的前i+j个字符. 既然是M x N的DP, 自然要先init 第一行和第一列.</li>
<li>然后就是optimally equation. 就是每次看S3的i+j-1个字符是否等于S1的i-1或者S2的j-1. 如果是, 就沿用F[i-1][j]或F[i][j-1].</li>
<li>但是这样fail在第15/18个test case:<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"sdfjas;dfjoisdufzjkndfasdkfja;sdfa;dfa;dfaskdjhfasdhjdfakhdgfkajdfasdjfgajksdfgaksdhfasdkbfjkdsfbajksdfhakjsdfbajkdfbakdjsfgaksdhgfjkdsghfkdsfgadsjfgkajsdgfkjasdfh"</span>, <span class="string">"dfnakdjnfjkzghdufguweygfasjkdfgb2gf8asf7tgbgasjkdfgasodf7asdgfajksdfguayfgaogfsdkagfsdhfajksdvfbgkadsghfakdsfgasduyfgajsdkfgajkdghfaksdgfuyadgfasjkdvfjsdkvfakfgauyksgfajkefgjkdasgfdjksfgadjkghfajksdfgaskdjfgasjkdgfuyaegfasdjkfgajkdfygadjskfgjkadfg"</span>, <span class="string">"sdfjas;dfjoisdfnakdjnfjkzghdufguwdufzjkeygfasjkdfgb2gf8asf7ndtgbgasjkdfgasodf7asdfgfajkasdksdfguayfgaogfsdkagfsfjadhfajksdvfbgkadsghfa;sdkdsfgasduyfgajsdkfgafajkdghfaksdgfuyadgfas;dfjkdvfjsdkvfakfgauyksa;dgfajkefgjkdasgfdjksffaskdjhfasdhjdfakhdgadjkghfajgfkajdfksdfgaskdjfgasjkdgfuasdjfgajksdfgaksdhfasdkbfjkdsfbajksdfyaegfasdjkfgajkdfygadjskfgjkadfghakjsdfbajkdfbakdjsfgaksdhgfjkdsghfkdsfgadsjfgkajsdgfkjasdfh"</span>]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>应该return false, 但我return true.<br>找了好久, 终于发现问题了: 我的递推方程是:<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if (s3.charAt(i + j - 1) == s1.charAt(i - 1)) &#123;</span><br><span class="line">  F[<span class="link_label">i</span>][<span class="link_reference">j</span>] = F[<span class="link_label">i - 1</span>][<span class="link_reference">j</span>];</span><br><span class="line">&#125; else if (s3.charAt(i + j - 1) == s2.charAt(j - 1)) &#123;</span><br><span class="line">  F[<span class="link_label">i</span>][<span class="link_reference">j</span>] = F[<span class="link_label">i</span>][<span class="link_reference">j - 1</span>];</span><br><span class="line">&#125;</span><br><span class="line">else &#123;</span><br><span class="line">  F[<span class="link_label">i</span>][<span class="link_reference">j</span>] = false;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注意这里: 如果s1.charAt(i - 1)和s3.charAt(i + j - 1)和s2.charAt(j - 1)相等的话, F[i][j]是给else if覆盖了. 所以有时候对有时候错. 所以是我的optimally equation写错了. 这里是or的关系.</p>
<h2 id="2nd_trial:_AC">2nd trial: AC</h2><ul>
<li>这次解决了这个bug. 使用OR来得到F[i][j].</li>
</ul>
<h2 id="3rd_trial:_fail">3rd trial: fail</h2><ul>
<li>虽然刚才那样做是可以AC, 但是空间复杂度太大! 因为这个只和上一层跟左一列有关系. 所以可以用1d的rolling array来做. 那为什么这里和distinct subsequences的1d不同, 是自左向右循环呢? 分析如下:</li>
<li>update的时候要看是否使用更新前还是更新后的上一层的信息.<ul>
<li>例如distinct subsequences就是使用更新前的上一层信息, 所以内循环是<strong>自后往前</strong>.</li>
<li>而像Interleaving string的1d rolling array就是自前向后.</li>
<li>这2个有什么区别呢: 区别在于optimally equation, 看到底需要上一层的哪个数, 如果是上一层的左边, 那么就不能覆盖的循环, 所以要自后向前. 而且若是同时需要上一层左侧和这一层左侧的话就不能用1d滚动数组了, 用mod rolling.</li>
<li>总结见下图: <img src="http://7xj2zx.com1.z0.glb.clouddn.com/9chap_rollingDP_interleaveDistinctSubseq.PNG" alt="9chap_rollingDP"></li>
</ul>
</li>
<li>Ganer就是这样写的. 但是我一开始先是像<a href="http://blog.csdn.net/linhuanmars/article/details/23589057" target="_blank" rel="external">distinct substring</a>那样写: 即内循环是<strong>从后向前</strong>来update State. 结果是错的.<ul>
<li>所以这里有个重要事情. 什么时候是自前向后, 什么时候自后向前. 这里并不是说Top-down, Bottom-up. 而是说1d rolling array里面是使用更新前还是更新后的值.<blockquote>
<p>每次迭代我们只保存了上一行的信息。接下来从前往后还是从后往前就取决于我们要用的是更新前还是更新后的信息，如果从前往后，我们会使用更新后的信息</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="4th_trial_:_AC">4th trial : AC</h2><ul>
<li>这题和distinct substring 的 rolling array的内层循环不同的是: 这里是从前往后.</li>
</ul>

	
	</div>
	
  
</div>
	<a type="button" href="/2015/05/20/Leetcode/Report/Report-Distinct Subsequences/#more" class="btn btn-default more">Read More</a>
</div>

		

		</div>

		<!-- pagination -->
		<div>
  		<center>
		<div class="pagination">
<ul class="pagination">
	 
		
          <li class="prev disabled"><a><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
        

        <li><a href="/"><i class="fa fa-home"></i>Home</a></li>

		
		   <li class="next"> <a href="/page/2/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a> </li>          
        
	
</ul>
</div>

  		</center>
		</div>

		
		
	</div> <!-- col-md-9 -->

	
		<div class="col-md-3">
	<div id="sidebar">
	
			<div class="form-group has-success has-feedback">
  <form action="//google.com/search" method="get" accept-charset="utf-8" >
    <input type="search" name="q" results="0" placeholder="Search" class="form-control">
    <input type="hidden" name="q" value="site:vlsi1217.github.io">	
  </form>
</div>

		
			
	<div class="widget">
		<h4>Categories</h4>
		<ul class="tag_box inline list-unstyled">
		
			<li><a href="/categories/Demo/">Demo<span>1</span></a></li>
		
			<li><a href="/categories/Interview/">Interview<span>21</span></a></li>
		
			<li><a href="/categories/Leetcode/">Leetcode<span>4</span></a></li>
		
			<li><a href="/categories/OA/">OA<span>4</span></a></li>
		
			<li><a href="/categories/OS/">OS<span>1</span></a></li>
		
			<li><a href="/categories/Thinking/">Thinking<span>2</span></a></li>
		
			<li><a href="/categories/Web/">Web<span>1</span></a></li>
		
		</ul>
	</div>

		
			
	<div class="widget">
		<h4>Tag Cloud</h4>
		<ul class="tag_box inline list-unstyled">		
		
			<li><a href="/tags/DC/">DC<span>2</span></a></li>
		
			<li><a href="/tags/Greedy/">Greedy<span>1</span></a></li>
		
			<li><a href="/tags/OA/">OA<span>2</span></a></li>
		
			<li><a href="/tags/Algorithm/">Algorithm<span>1</span></a></li>
		
			<li><a href="/tags/DP/">DP<span>7</span></a></li>
		
			<li><a href="/tags/Stack/">Stack<span>1</span></a></li>
		
			<li><a href="/tags/ACM/">ACM<span>2</span></a></li>
		
			<li><a href="/tags/BFS/">BFS<span>1</span></a></li>
		
			<li><a href="/tags/Lintcode/">Lintcode<span>7</span></a></li>
		
			<li><a href="/tags/List/">List<span>1</span></a></li>
		
			<li><a href="/tags/BinaryTree/">BinaryTree<span>1</span></a></li>
		
			<li><a href="/tags/POJ/">POJ<span>1</span></a></li>
		
			<li><a href="/tags/mooc/">mooc<span>1</span></a></li>
		
			<li><a href="/tags/Ladder/">Ladder<span>7</span></a></li>
		
			<li><a href="/tags/NineChap/">NineChap<span>14</span></a></li>
		
			<li><a href="/tags/demo/">demo<span>1</span></a></li>
		
			<li><a href="/tags/Leetcode/">Leetcode<span>16</span></a></li>
		
			<li><a href="/tags/webApp/">webApp<span>1</span></a></li>
		
			<li><a href="/tags/misc/">misc<span>1</span></a></li>
		
		 
		</ul>
	</div>


		
			
<div class="widget">
  <h4>Recent Posts</h4>
  <ul class="entry list-unstyled">
    
      <li>
        <a href="/2015/05/30/Leetcode/Report/Report-LargestRectangleInstagram/"  title="做完九章Ladder" ><i class="fa fa-file-o"></i>Largest rectangle in instag...</a>
      </li>
    
      <li>
        <a href="/2015/05/26/MOOC/Algorithm_JapanBook/Algs-Japan-toc/"  title="Path of learning the book: 挑战程序设计竞赛" ><i class="fa fa-file-o"></i>Algs-Japan-toc...</a>
      </li>
    
      <li>
        <a href="/2015/05/25/Leetcode/Report/Report-Word-Break/"  title="O() != TLE. 同样的O(), 但是实际时间还是会导致TLE" ><i class="fa fa-file-o"></i>Report: Word Break...</a>
      </li>
    
      <li>
        <a href="/2015/05/24/Leetcode/Report/Report-Triangle/"  title="九章算法的学习DP的经典例子" ><i class="fa fa-file-o"></i>Report: Triangle Min Path S...</a>
      </li>
    
      <li>
        <a href="/2015/05/24/Leetcode/Report/Report-Jump-Game-I/"  title="经典的DP, Greedy问题" ><i class="fa fa-file-o"></i>Report: Jump Game I...</a>
      </li>
    
  </ul>
</div>

		
			
<div class="widget">
	<h4>Links</h4>
	<ul class="blogroll list-unstyled">
	
		<li><i class="fa fa-github"></i><a href="https://github.com/wzpan/freemind/" title="Freemind's Github repository." target="_blank"]);">Freemind</a></li>
	
		<li><i class="fa fa-code"></i><a href="n00tc0d3r.blogspot.com" title="N00t." target="_blank"]);">N00t题解</a></li>
	
		<li><i class="fa fa-code"></i><a href="http://www.shuatiblog.com/" title="" target="_blank"]);">Coding monkey</a></li>
	
		<li><i class="fa fa-code"></i><a href="http://leetcode.tgic.me/" title="" target="_blank"]);">tgic290题解</a></li>
	
		<li><i class="fa fa-code"></i><a href="http://www.fgdsb.com/" title="" target="_blank"]);">fgdsb题解</a></li>
	
		<li><i class="fa fa-github"></i><a href="http://bookshadow.com/leetcode/" title="" target="_blank"]);">书影Leetcode 290题题解</a></li>
	
		<li><i class="fa fa-code"></i><a href="https://sites.google.com/site/jennyshelloworld/company-blog" title="" target="_blank"]);">CMU_Jenny九章算法1笔记</a></li>
	
		<li><i class=""></i><a href="http://www.cnblogs.com/yuzhangcmu/" title="" target="_blank"]);">九章Yu&#39;s Garden</a></li>
	
		<li><i class="fa fa-coffee"></i><a href="http://mindhacks.cn/" title="" target="_blank"]);">暗时间</a></li>
	
		<li><i class="fa fa-coffee"></i><a href="http://coolshell.cn/articles/4990.html" title="" target="_blank"]);">左耳朵耗子</a></li>
	
		<li><i class="fa fa-coffee"></i><a href="http://hehejun.blogspot.com/" title="" target="_blank"]);">呵呵君blog</a></li>
	
		<li><i class="fa fa-coffee"></i><a href="http://zh.lucida.me/blog/on-learning-algorithms/" title="" target="_blank"]);">algs学习之路-lucida</a></li>
	
	</ul>
</div>


		
	</div> <!-- sidebar -->
</div> <!-- col-md-3 -->

	
	
</div> <!-- row-fluid -->
	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  &copy; 2015 玉娇龙
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
</div> <!-- container-narrow -->
  
<a id="gotop" href="#">   
  <span>▲</span> 
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>


<script type="text/javascript">
var disqus_shortname = 'vlsi1217';
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62877030-1', 'auto');
  ga('send', 'pageview');

</script>
</body>
   </html>
